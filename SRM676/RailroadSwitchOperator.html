<html><body bgcolor="#000000" text="#ffffff"><table><tr><td colspan="2"><h3>Problem Statement</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><p>
Alice is a railroad switch operator.
She is in charge of a network of rails that has the topology of a perfectly balanced binary tree with <b>N</b> leaves.
<b>N</b> is a power of two.
Each non-leaf node of the tree has a left child and a right child.
The leaves are numbered from 1 to <b>N</b> from the left to the right.
</p>

<p>
There will be some trains that will pass through Alice's railroad network.
Each of these trains will enter the network in the root of the tree and leave it in one of the leaves.
Each non-leaf node contains a railroad switch that can send an incoming train either towards the left child or towards the right child of that node.
Initially all switches point to the left.
</p>

<p>
You are given the information about the trains in vector &lt;int&gt;s <b>x</b> and <b>t</b>.
For each valid i there will be a train that appears in the root node at time <b>t</b>[i] and wishes to reach the leaf <b>x</b>[i].
All the <b>t</b>[i] are distinct.
Alice must direct all trains to their desired destinations by flipping all the necessary switches.
</p>

<p>
More formally, for each integer z = 1, 2, 3, ... the following steps happen, in order:
<ol>
<li>If there is a train with <b>t</b>[i] = z, at time z that train will appear in the root.</li>
<li>Immediately after that happens, Alice decides whether she wants to take an action. If she doesn't, nothing happens. If she does, she may flip as many switches as she likes. All these flips happen in an instant.</li>
<li>All trains leave their current nodes according to the state of the switches in those nodes.</li>
<li>During the time interval (z, z+1) each train travels along an edge of the tree to the next node.</li>
<li>Any train that just reached a leaf leaves the network.</li>
</ol>
</p>

<p>
Alice must route all trains to their desired destinations.
Given this requirement, she would like to minimize the number of actions she has to take.
(Note that she only cares about the number of actions. The total number of times a switch is flipped does not matter.)
</p>

<p>
Compute and return the smallest number of actions Alice has to take in order to route all trains correctly.
</p></td></tr><tr><td colspan="2"><h3>Definition</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td>Class:</td><td>RailroadSwitchOperator</td></tr><tr><td>Method:</td><td>minEnergy</td></tr><tr><td>Parameters:</td><td>int, vector &lt;int&gt;, vector &lt;int&gt;</td></tr><tr><td>Returns:</td><td>int</td></tr><tr><td>Method signature:</td><td>int minEnergy(int N, vector &lt;int&gt; x, vector &lt;int&gt; t)</td></tr><tr><td colspan="2">(be sure your method is public)</td></tr></table></td></tr><tr><td colspan="2"><h3>Limits</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td>Time limit (s):</td><td>2.000</td></tr><tr><td>Memory limit (MB):</td><td>256</td></tr><tr><td>Stack limit (MB):</td><td>256</td></tr></table></td></tr><tr><td colspan="2"><h3>Constraints</h3></td></tr><tr><td align="center" valign="top">-</td><td><b>N</b> will be a power of 2 between 2 and 131,072 (= 2^17), inclusive.</td></tr><tr><td align="center" valign="top">-</td><td>The number of elements in <b>t</b> will be between 1 and 2,500, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td><b>x</b> will have exactly the same number of elements as <b>t</b>.</td></tr><tr><td align="center" valign="top">-</td><td>Each element of <b>x</b> will be between 1 and <b>N</b>, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td>Each element of <b>t</b> will be between 1 and 5,000, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td><b>t</b>[i] &lt; <b>t</b>[i+1] for all valid i.</td></tr><tr><td colspan="2"><h3>Examples</h3></td></tr><tr><td align="center" nowrap="true">0)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>2</pre></td></tr><tr><td><pre>{1,2,1,2,1,2,1,2}</pre></td></tr><tr><td><pre>{1,2,3,4,5,6,7,8}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 7</pre></td></tr><tr><td><table><tr><td colspan="2">This network is very simple: one root and two leaves.
Trains appear in the root at time 1, 2, ..., 8.
The first train can use the default setting of the switch.
For each of the 7 remaining trains Alice must take an action to flip the switch.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">1)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>4</pre></td></tr><tr><td><pre>{1,4,4,4,4,4,4,4,4,4}</pre></td></tr><tr><td><pre>{1,2,4,8,16,32,64,128,256,512}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 1</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">2)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>32</pre></td></tr><tr><td><pre>{2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,1,3,5,7,9,11,13,15,17,19,21,23,25,27,29,31}</pre></td></tr><tr><td><pre>{1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 20</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">3)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>131072</pre></td></tr><tr><td><pre>{1,1,1,1,1,1,1}</pre></td></tr><tr><td><pre>{10,300,500,676,800,950,1000}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 0</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">4)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>1024</pre></td></tr><tr><td><pre>{1,1024,2,512,4,256,8,128,16,64,32}</pre></td></tr><tr><td><pre>{1,2,3,5,8,13,21,34,55,89,144}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 10</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr></table><p>This problem statement is the exclusive and proprietary property of TopCoder, Inc.  Any unauthorized use or reproduction of this information without the prior written consent of TopCoder, Inc. is strictly prohibited.  (c)2003, TopCoder, Inc.  All rights reserved.  </p></body></html>
